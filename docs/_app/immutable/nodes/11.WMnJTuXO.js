import{s as Ye,n as ae,e as Ze}from"../chunks/scheduler.DydP1Fc2.js";import{S as et,i as tt,e as c,s as D,t as re,c as h,a as d,k as $,f as A,d as f,b as oe,m as o,g as ie,h as a,l as ce,v as st,j as lt}from"../chunks/index.BIr2hK6o.js";import{e as q}from"../chunks/each.Cy0tYKnX.js";import{b as we}from"../chunks/paths.-ao2RsHC.js";import{g as nt}from"../chunks/entry.DarOVNdr.js";function Fe(r,t,n){const l=r.slice();return l[8]=t[n],l}function Me(r,t,n){const l=r.slice();return l[8]=t[n],l}function ze(r,t,n){const l=r.slice();return l[8]=t[n],l}function Ge(r,t,n){const l=r.slice();return l[8]=t[n],l}function He(r,t,n){const l=r.slice();return l[17]=t[n],l}function Qe(r){let t,n,l,i,V,w=r[17].date+"",N,O,P,F;function v(){return r[5](r[17])}return{c(){t=c("div"),n=c("img"),i=D(),V=c("p"),N=re(w),O=D(),this.h()},l(k){t=h(k,"DIV",{class:!0});var u=d(t);n=h(u,"IMG",{class:!0,alt:!0,src:!0}),i=A(u),V=h(u,"P",{class:!0});var E=d(V);N=oe(E,w),E.forEach(f),O=A(u),u.forEach(f),this.h()},h(){o(n,"class","swimmer svelte-1snjamj"),o(n,"alt","swimmer"),Ze(n.src,l="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQujAgmFQCaOtgfzwGzDDRcOonOJ7C2m-hqlQ&s")||o(n,"src",l),o(V,"class","date svelte-1snjamj"),o(t,"class","square svelte-1snjamj")},m(k,u){ie(k,t,u),a(t,n),a(t,i),a(t,V),a(V,N),a(t,O),P||(F=st(t,"click",v),P=!0)},p(k,u){r=k,u&1&&w!==(w=r[17].date+"")&&lt(N,w)},d(k){k&&f(t),P=!1,F()}}}function We(r){let t,n;return{c(){t=c("span"),n=re("★"),this.h()},l(l){t=h(l,"SPAN",{class:!0});var i=d(t);n=oe(i,"★"),i.forEach(f),this.h()},h(){o(t,"class","star "+(r[8]<r[1].sleep?"filled":"")+" svelte-1snjamj")},m(l,i){ie(l,t,i),a(t,n)},p:ae,d(l){l&&f(t)}}}function Be(r){let t,n;return{c(){t=c("span"),n=re("★"),this.h()},l(l){t=h(l,"SPAN",{class:!0});var i=d(t);n=oe(i,"★"),i.forEach(f),this.h()},h(){o(t,"class","star "+(r[8]<r[1].nutrition?"filled":"")+" svelte-1snjamj")},m(l,i){ie(l,t,i),a(t,n)},p:ae,d(l){l&&f(t)}}}function Je(r){let t,n;return{c(){t=c("span"),n=re("★"),this.h()},l(l){t=h(l,"SPAN",{class:!0});var i=d(t);n=oe(i,"★"),i.forEach(f),this.h()},h(){o(t,"class","star "+(r[8]<r[1].feel?"filled":"")+" svelte-1snjamj")},m(l,i){ie(l,t,i),a(t,n)},p:ae,d(l){l&&f(t)}}}function Le(r){let t,n;return{c(){t=c("span"),n=re("★"),this.h()},l(l){t=h(l,"SPAN",{class:!0});var i=d(t);n=oe(i,"★"),i.forEach(f),this.h()},h(){o(t,"class","star "+(r[8]<r[2]?"filled":"")+" svelte-1snjamj")},m(l,i){ie(l,t,i),a(t,n)},p:ae,d(l){l&&f(t)}}}function at(r){let t,n,l,i="Recent sessions",V,w,N='<button class="add svelte-1snjamj">+</button>',O,P,F,v,k="Show all",u,E,S,T="Weekly Statistics",me,I,M,W,Se="Sleep",pe,B,je,z,J,Ie="Nutrition",ge,L,Ce,G,R,Ne="Feel",xe,K,be,H,U,Pe="Sessions",ke,Z,Ee,De,Q,X,Ve="General score",Ae,Y,ee=q(r[0].slice(0,5)),m=[];for(let s=0;s<ee.length;s+=1)m[s]=Qe(He(r,ee,s));let te=q(Array(5).fill(0).map(Re)),p=[];for(let s=0;s<te.length;s+=1)p[s]=We(Ge(r,te,s));let se=q(Array(5).fill(0).map(Ke)),j=[];for(let s=0;s<se.length;s+=1)j[s]=Be(ze(r,se,s));let le=q(Array(5).fill(0).map(Ue)),g=[];for(let s=0;s<le.length;s+=1)g[s]=Je(Me(r,le,s));let ne=q(Array(5).fill(0).map(Xe)),C=[];for(let s=0;s<ne.length;s+=1)C[s]=Le(Fe(r,ne,s));return{c(){t=c("main"),n=c("section"),l=c("h2"),l.textContent=i,V=D(),w=c("a"),w.innerHTML=N,O=D(),P=c("div");for(let s=0;s<m.length;s+=1)m[s].c();F=D(),v=c("a"),v.textContent=k,u=D(),E=c("section"),S=c("h2"),S.textContent=T,me=D(),I=c("div"),M=c("div"),W=c("p"),W.textContent=Se,pe=D(),B=c("div");for(let s=0;s<p.length;s+=1)p[s].c();je=D(),z=c("div"),J=c("p"),J.textContent=Ie,ge=D(),L=c("div");for(let s=0;s<j.length;s+=1)j[s].c();Ce=D(),G=c("div"),R=c("p"),R.textContent=Ne,xe=D(),K=c("div");for(let s=0;s<g.length;s+=1)g[s].c();be=D(),H=c("div"),U=c("p"),U.textContent=Pe,ke=D(),Z=c("p"),Ee=re(r[3]),De=D(),Q=c("div"),X=c("p"),X.textContent=Ve,Ae=D(),Y=c("div");for(let s=0;s<C.length;s+=1)C[s].c();this.h()},l(s){t=h(s,"MAIN",{class:!0});var x=d(t);n=h(x,"SECTION",{class:!0});var e=d(n);l=h(e,"H2",{class:!0,"data-svelte-h":!0}),$(l)!=="svelte-18np5ji"&&(l.textContent=i),V=A(e),w=h(e,"A",{href:!0,"data-svelte-h":!0}),$(w)!=="svelte-1ga9esc"&&(w.innerHTML=N),O=A(e),P=h(e,"DIV",{class:!0});var b=d(P);for(let _=0;_<m.length;_+=1)m[_].l(b);b.forEach(f),F=A(e),v=h(e,"A",{class:!0,href:!0,"data-svelte-h":!0}),$(v)!=="svelte-16sobnv"&&(v.textContent=k),e.forEach(f),u=A(x),E=h(x,"SECTION",{class:!0});var he=d(E);S=h(he,"H2",{class:!0,"data-svelte-h":!0}),$(S)!=="svelte-11cmfec"&&(S.textContent=T),me=A(he),I=h(he,"DIV",{class:!0});var y=d(I);M=h(y,"DIV",{class:!0});var fe=d(M);W=h(fe,"P",{class:!0,"data-svelte-h":!0}),$(W)!=="svelte-12m8zmj"&&(W.textContent=Se),pe=A(fe),B=h(fe,"DIV",{class:!0});var ye=d(B);for(let _=0;_<p.length;_+=1)p[_].l(ye);ye.forEach(f),fe.forEach(f),je=A(y),z=h(y,"DIV",{class:!0});var ue=d(z);J=h(ue,"P",{class:!0,"data-svelte-h":!0}),$(J)!=="svelte-w2xvzm"&&(J.textContent=Ie),ge=A(ue),L=h(ue,"DIV",{class:!0});var qe=d(L);for(let _=0;_<j.length;_+=1)j[_].l(qe);qe.forEach(f),ue.forEach(f),Ce=A(y),G=h(y,"DIV",{class:!0});var de=d(G);R=h(de,"P",{class:!0,"data-svelte-h":!0}),$(R)!=="svelte-1od1tx6"&&(R.textContent=Ne),xe=A(de),K=h(de,"DIV",{class:!0});var Oe=d(K);for(let _=0;_<g.length;_+=1)g[_].l(Oe);Oe.forEach(f),de.forEach(f),be=A(y),H=h(y,"DIV",{class:!0});var ve=d(H);U=h(ve,"P",{class:!0,"data-svelte-h":!0}),$(U)!=="svelte-1t2pf7v"&&(U.textContent=Pe),ke=A(ve),Z=h(ve,"P",{class:!0});var Te=d(Z);Ee=oe(Te,r[3]),Te.forEach(f),ve.forEach(f),De=A(y),Q=h(y,"DIV",{class:!0});var _e=d(Q);X=h(_e,"P",{class:!0,"data-svelte-h":!0}),$(X)!=="svelte-i9m9kk"&&(X.textContent=Ve),Ae=A(_e),Y=h(_e,"DIV",{class:!0});var $e=d(Y);for(let _=0;_<C.length;_+=1)C[_].l($e);$e.forEach(f),_e.forEach(f),y.forEach(f),he.forEach(f),x.forEach(f),this.h()},h(){o(l,"class","svelte-1snjamj"),o(w,"href",we+"/journal/new"),o(P,"class","sessions svelte-1snjamj"),o(v,"class","link show svelte-1snjamj"),o(v,"href",we+"/journal/sessions"),o(n,"class","recent svelte-1snjamj"),o(S,"class","svelte-1snjamj"),o(W,"class","bold svelte-1snjamj"),o(B,"class","stars svelte-1snjamj"),o(M,"class","stats_square svelte-1snjamj"),o(J,"class","bold svelte-1snjamj"),o(L,"class","stars svelte-1snjamj"),o(z,"class","stats_square svelte-1snjamj"),o(R,"class","bold svelte-1snjamj"),o(K,"class","stars svelte-1snjamj"),o(G,"class","stats_square svelte-1snjamj"),o(U,"class","bold svelte-1snjamj"),o(Z,"class","bold three svelte-1snjamj"),o(H,"class","stats_square svelte-1snjamj"),o(X,"class","bold svelte-1snjamj"),o(Y,"class","stars svelte-1snjamj"),o(Q,"class","stats_square svelte-1snjamj"),o(I,"class","stats svelte-1snjamj"),o(E,"class","stats-main svelte-1snjamj"),o(t,"class","svelte-1snjamj")},m(s,x){ie(s,t,x),a(t,n),a(n,l),a(n,V),a(n,w),a(n,O),a(n,P);for(let e=0;e<m.length;e+=1)m[e]&&m[e].m(P,null);a(n,F),a(n,v),a(t,u),a(t,E),a(E,S),a(E,me),a(E,I),a(I,M),a(M,W),a(M,pe),a(M,B);for(let e=0;e<p.length;e+=1)p[e]&&p[e].m(B,null);a(I,je),a(I,z),a(z,J),a(z,ge),a(z,L);for(let e=0;e<j.length;e+=1)j[e]&&j[e].m(L,null);a(I,Ce),a(I,G),a(G,R),a(G,xe),a(G,K);for(let e=0;e<g.length;e+=1)g[e]&&g[e].m(K,null);a(I,be),a(I,H),a(H,U),a(H,ke),a(H,Z),a(Z,Ee),a(I,De),a(I,Q),a(Q,X),a(Q,Ae),a(Q,Y);for(let e=0;e<C.length;e+=1)C[e]&&C[e].m(Y,null)},p(s,[x]){if(x&1){ee=q(s[0].slice(0,5));let e;for(e=0;e<ee.length;e+=1){const b=He(s,ee,e);m[e]?m[e].p(b,x):(m[e]=Qe(b),m[e].c(),m[e].m(P,null))}for(;e<m.length;e+=1)m[e].d(1);m.length=ee.length}if(x&2){te=q(Array(5).fill(0).map(Re));let e;for(e=0;e<te.length;e+=1){const b=Ge(s,te,e);p[e]?p[e].p(b,x):(p[e]=We(b),p[e].c(),p[e].m(B,null))}for(;e<p.length;e+=1)p[e].d(1);p.length=te.length}if(x&2){se=q(Array(5).fill(0).map(Ke));let e;for(e=0;e<se.length;e+=1){const b=ze(s,se,e);j[e]?j[e].p(b,x):(j[e]=Be(b),j[e].c(),j[e].m(L,null))}for(;e<j.length;e+=1)j[e].d(1);j.length=se.length}if(x&2){le=q(Array(5).fill(0).map(Ue));let e;for(e=0;e<le.length;e+=1){const b=Me(s,le,e);g[e]?g[e].p(b,x):(g[e]=Je(b),g[e].c(),g[e].m(K,null))}for(;e<g.length;e+=1)g[e].d(1);g.length=le.length}if(x&4){ne=q(Array(5).fill(0).map(Xe));let e;for(e=0;e<ne.length;e+=1){const b=Fe(s,ne,e);C[e]?C[e].p(b,x):(C[e]=Le(b),C[e].c(),C[e].m(Y,null))}for(;e<C.length;e+=1)C[e].d(1);C.length=ne.length}},i:ae,o:ae,d(s){s&&f(t),ce(m,s),ce(p,s),ce(j,s),ce(g,s),ce(C,s)}}}const Re=(r,t)=>t,Ke=(r,t)=>t,Ue=(r,t)=>t,Xe=(r,t)=>t;function rt(r,t,n){let l,i=[];function V(){typeof window<"u"&&n(4,i=JSON.parse(localStorage.getItem("sessions"))||[])}V(),console.log(i);function w(){if(typeof window>"u")return{sleep:0,nutrition:0,feel:0};const v=new Date,k=new Date(v);k.setDate(v.getDate()-7);const u=i.filter(S=>{const T=new Date(S.date);return T>=k&&T<=v});if(u.length===0)return{sleep:0,nutrition:0,feel:0};const E=u.reduce((S,T)=>(S.sleep+=Number(T.sleep)||0,S.nutrition+=Number(T.nutrition)||0,S.feel+=Number(T.feel)||0,S),{sleep:0,nutrition:0,feel:0});return{sleep:+(E.sleep/u.length).toFixed(2),nutrition:+(E.nutrition/u.length).toFixed(2),feel:+(E.feel/u.length).toFixed(2),count:u.length}}let N=w(),O=Math.round((N.sleep+N.nutrition+N.feel)/3),P=N.count||0;const F=v=>nt(we+"/journal/sessions/"+v.id);return r.$$.update=()=>{r.$$.dirty&16&&n(0,l=[...i].sort((v,k)=>{const u=new Date(`${v.date}T${v.time||"00:00"}`);return new Date(`${k.date}T${k.time||"00:00"}`)-u}))},[l,N,O,P,i,F]}class ut extends et{constructor(t){super(),tt(this,t,rt,at,Ye,{})}}export{ut as component};
