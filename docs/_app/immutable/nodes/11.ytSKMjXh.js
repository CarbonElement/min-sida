import{s as Ye,n as ne,e as Ze}from"../chunks/scheduler.DydP1Fc2.js";import{S as et,i as tt,e as o,s as A,t as ae,c as i,a as u,k as M,f as D,d as f,b as re,m as c,g as ce,h as a,l as oe,v as st,j as lt}from"../chunks/index.BIr2hK6o.js";import{e as j}from"../chunks/each.D6YF6ztN.js";import{b as De}from"../chunks/paths.DPIGKip_.js";function Ge(r,t,n){const l=r.slice();return l[7]=t[n],l}function He(r,t,n){const l=r.slice();return l[7]=t[n],l}function Te(r,t,n){const l=r.slice();return l[7]=t[n],l}function $e(r,t,n){const l=r.slice();return l[7]=t[n],l}function ze(r,t,n){const l=r.slice();return l[16]=t[n],l}function Qe(r){let t,n,l,h,N,_=r[16].date+"",O,F,y,P;function S(){return r[4](r[16])}return{c(){t=o("div"),n=o("img"),h=A(),N=o("p"),O=ae(_),F=A(),this.h()},l(E){t=i(E,"DIV",{class:!0});var m=u(t);n=i(m,"IMG",{class:!0,src:!0}),h=D(m),N=i(m,"P",{class:!0});var d=u(N);O=re(d,_),d.forEach(f),F=D(m),m.forEach(f),this.h()},h(){c(n,"class","swimmer svelte-cqksmr"),Ze(n.src,l="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQujAgmFQCaOtgfzwGzDDRcOonOJ7C2m-hqlQ&s")||c(n,"src",l),c(N,"class","date svelte-cqksmr"),c(t,"class","square svelte-cqksmr")},m(E,m){ce(E,t,m),a(t,n),a(t,h),a(t,N),a(N,O),a(t,F),y||(P=st(t,"click",S),y=!0)},p(E,m){r=E,m&1&&_!==(_=r[16].date+"")&&lt(O,_)},d(E){E&&f(t),y=!1,P()}}}function We(r){let t,n;return{c(){t=o("span"),n=ae("★"),this.h()},l(l){t=i(l,"SPAN",{class:!0});var h=u(t);n=re(h,"★"),h.forEach(f),this.h()},h(){c(t,"class","star "+(r[7]<r[1].sleep?"filled":"")+" svelte-cqksmr")},m(l,h){ce(l,t,h),a(t,n)},p:ne,d(l){l&&f(t)}}}function Je(r){let t,n;return{c(){t=o("span"),n=ae("★"),this.h()},l(l){t=i(l,"SPAN",{class:!0});var h=u(t);n=re(h,"★"),h.forEach(f),this.h()},h(){c(t,"class","star "+(r[7]<r[1].nutrition?"filled":"")+" svelte-cqksmr")},m(l,h){ce(l,t,h),a(t,n)},p:ne,d(l){l&&f(t)}}}function Le(r){let t,n;return{c(){t=o("span"),n=ae("★"),this.h()},l(l){t=i(l,"SPAN",{class:!0});var h=u(t);n=re(h,"★"),h.forEach(f),this.h()},h(){c(t,"class","star "+(r[7]<r[1].feel?"filled":"")+" svelte-cqksmr")},m(l,h){ce(l,t,h),a(t,n)},p:ne,d(l){l&&f(t)}}}function Re(r){let t,n;return{c(){t=o("span"),n=ae("★"),this.h()},l(l){t=i(l,"SPAN",{class:!0});var h=u(t);n=re(h,"★"),h.forEach(f),this.h()},h(){c(t,"class","star "+(r[7]<r[2]?"filled":"")+" svelte-cqksmr")},m(l,h){ce(l,t,h),a(t,n)},p:ne,d(l){l&&f(t)}}}function nt(r){let t,n,l,h="Recent sessions",N,_,O='<button class="add svelte-cqksmr">+</button>',F,y,P,S,E="Show all",m,d,w,we="Weekly Statistics",de,I,G,Q,Ie="Sleep",me,W,pe,H,J,Se="Nutrition",ge,L,ke,T,R,Ne="Feel",qe,B,Ce,$,K,ye="Sessions",xe,Y,be,Ee,z,U,Pe="General score",Ae,X,Z=j(r[0].slice(-5).reverse()),p=[];for(let s=0;s<Z.length;s+=1)p[s]=Qe(ze(r,Z,s));let ee=j(Array(5).fill(0).map(Be)),g=[];for(let s=0;s<ee.length;s+=1)g[s]=We($e(r,ee,s));let te=j(Array(5).fill(0).map(Ke)),k=[];for(let s=0;s<te.length;s+=1)k[s]=Je(Te(r,te,s));let se=j(Array(5).fill(0).map(Ue)),q=[];for(let s=0;s<se.length;s+=1)q[s]=Le(He(r,se,s));let le=j(Array(5).fill(0).map(Xe)),C=[];for(let s=0;s<le.length;s+=1)C[s]=Re(Ge(r,le,s));return{c(){t=o("main"),n=o("section"),l=o("h2"),l.textContent=h,N=A(),_=o("a"),_.innerHTML=O,F=A(),y=o("div");for(let s=0;s<p.length;s+=1)p[s].c();P=A(),S=o("a"),S.textContent=E,m=A(),d=o("section"),w=o("h2"),w.textContent=we,de=A(),I=o("div"),G=o("div"),Q=o("p"),Q.textContent=Ie,me=A(),W=o("div");for(let s=0;s<g.length;s+=1)g[s].c();pe=A(),H=o("div"),J=o("p"),J.textContent=Se,ge=A(),L=o("div");for(let s=0;s<k.length;s+=1)k[s].c();ke=A(),T=o("div"),R=o("p"),R.textContent=Ne,qe=A(),B=o("div");for(let s=0;s<q.length;s+=1)q[s].c();Ce=A(),$=o("div"),K=o("p"),K.textContent=ye,xe=A(),Y=o("p"),be=ae(r[3]),Ee=A(),z=o("div"),U=o("p"),U.textContent=Pe,Ae=A(),X=o("div");for(let s=0;s<C.length;s+=1)C[s].c();this.h()},l(s){t=i(s,"MAIN",{class:!0});var x=u(t);n=i(x,"SECTION",{class:!0});var e=u(n);l=i(e,"H2",{class:!0,"data-svelte-h":!0}),M(l)!=="svelte-18np5ji"&&(l.textContent=h),N=D(e),_=i(e,"A",{href:!0,"data-svelte-h":!0}),M(_)!=="svelte-1ga9esc"&&(_.innerHTML=O),F=D(e),y=i(e,"DIV",{class:!0});var b=u(y);for(let v=0;v<p.length;v+=1)p[v].l(b);b.forEach(f),P=D(e),S=i(e,"A",{class:!0,href:!0,"data-svelte-h":!0}),M(S)!=="svelte-16sobnv"&&(S.textContent=E),e.forEach(f),m=D(x),d=i(x,"SECTION",{class:!0});var ie=u(d);w=i(ie,"H2",{class:!0,"data-svelte-h":!0}),M(w)!=="svelte-11cmfec"&&(w.textContent=we),de=D(ie),I=i(ie,"DIV",{class:!0});var V=u(I);G=i(V,"DIV",{class:!0});var he=u(G);Q=i(he,"P",{class:!0,"data-svelte-h":!0}),M(Q)!=="svelte-1fjhksf"&&(Q.textContent=Ie),me=D(he),W=i(he,"DIV",{class:!0});var Ve=u(W);for(let v=0;v<g.length;v+=1)g[v].l(Ve);Ve.forEach(f),he.forEach(f),pe=D(V),H=i(V,"DIV",{class:!0});var fe=u(H);J=i(fe,"P",{class:!0,"data-svelte-h":!0}),M(J)!=="svelte-7aoyyg"&&(J.textContent=Se),ge=D(fe),L=i(fe,"DIV",{class:!0});var je=u(L);for(let v=0;v<k.length;v+=1)k[v].l(je);je.forEach(f),fe.forEach(f),ke=D(V),T=i(V,"DIV",{class:!0});var ue=u(T);R=i(ue,"P",{class:!0,"data-svelte-h":!0}),M(R)!=="svelte-d8b5c"&&(R.textContent=Ne),qe=D(ue),B=i(ue,"DIV",{class:!0});var Oe=u(B);for(let v=0;v<q.length;v+=1)q[v].l(Oe);Oe.forEach(f),ue.forEach(f),Ce=D(V),$=i(V,"DIV",{class:!0});var ve=u($);K=i(ve,"P",{class:!0,"data-svelte-h":!0}),M(K)!=="svelte-qhf23z"&&(K.textContent=ye),xe=D(ve),Y=i(ve,"P",{class:!0});var Fe=u(Y);be=re(Fe,r[3]),Fe.forEach(f),ve.forEach(f),Ee=D(V),z=i(V,"DIV",{class:!0});var _e=u(z);U=i(_e,"P",{class:!0,"data-svelte-h":!0}),M(U)!=="svelte-13svbiq"&&(U.textContent=Pe),Ae=D(_e),X=i(_e,"DIV",{class:!0});var Me=u(X);for(let v=0;v<C.length;v+=1)C[v].l(Me);Me.forEach(f),_e.forEach(f),V.forEach(f),ie.forEach(f),x.forEach(f),this.h()},h(){c(l,"class","svelte-cqksmr"),c(_,"href",De+"/journal/new"),c(y,"class","sessions svelte-cqksmr"),c(S,"class","link show svelte-cqksmr"),c(S,"href",De+"/journal/sessions"),c(n,"class","recent svelte-cqksmr"),c(w,"class","svelte-cqksmr"),c(Q,"class","svelte-cqksmr"),c(W,"class","stars svelte-cqksmr"),c(G,"class","stats_square svelte-cqksmr"),c(J,"class","svelte-cqksmr"),c(L,"class","stars svelte-cqksmr"),c(H,"class","stats_square svelte-cqksmr"),c(R,"class","svelte-cqksmr"),c(B,"class","stars svelte-cqksmr"),c(T,"class","stats_square svelte-cqksmr"),c(K,"class","svelte-cqksmr"),c(Y,"class","bold svelte-cqksmr"),c($,"class","stats_square svelte-cqksmr"),c(U,"class","svelte-cqksmr"),c(X,"class","stars svelte-cqksmr"),c(z,"class","stats_square svelte-cqksmr"),c(I,"class","stats svelte-cqksmr"),c(d,"class","stats-main svelte-cqksmr"),c(t,"class","svelte-cqksmr")},m(s,x){ce(s,t,x),a(t,n),a(n,l),a(n,N),a(n,_),a(n,F),a(n,y);for(let e=0;e<p.length;e+=1)p[e]&&p[e].m(y,null);a(n,P),a(n,S),a(t,m),a(t,d),a(d,w),a(d,de),a(d,I),a(I,G),a(G,Q),a(G,me),a(G,W);for(let e=0;e<g.length;e+=1)g[e]&&g[e].m(W,null);a(I,pe),a(I,H),a(H,J),a(H,ge),a(H,L);for(let e=0;e<k.length;e+=1)k[e]&&k[e].m(L,null);a(I,ke),a(I,T),a(T,R),a(T,qe),a(T,B);for(let e=0;e<q.length;e+=1)q[e]&&q[e].m(B,null);a(I,Ce),a(I,$),a($,K),a($,xe),a($,Y),a(Y,be),a(I,Ee),a(I,z),a(z,U),a(z,Ae),a(z,X);for(let e=0;e<C.length;e+=1)C[e]&&C[e].m(X,null)},p(s,[x]){if(x&1){Z=j(s[0].slice(-5).reverse());let e;for(e=0;e<Z.length;e+=1){const b=ze(s,Z,e);p[e]?p[e].p(b,x):(p[e]=Qe(b),p[e].c(),p[e].m(y,null))}for(;e<p.length;e+=1)p[e].d(1);p.length=Z.length}if(x&2){ee=j(Array(5).fill(0).map(Be));let e;for(e=0;e<ee.length;e+=1){const b=$e(s,ee,e);g[e]?g[e].p(b,x):(g[e]=We(b),g[e].c(),g[e].m(W,null))}for(;e<g.length;e+=1)g[e].d(1);g.length=ee.length}if(x&2){te=j(Array(5).fill(0).map(Ke));let e;for(e=0;e<te.length;e+=1){const b=Te(s,te,e);k[e]?k[e].p(b,x):(k[e]=Je(b),k[e].c(),k[e].m(L,null))}for(;e<k.length;e+=1)k[e].d(1);k.length=te.length}if(x&2){se=j(Array(5).fill(0).map(Ue));let e;for(e=0;e<se.length;e+=1){const b=He(s,se,e);q[e]?q[e].p(b,x):(q[e]=Le(b),q[e].c(),q[e].m(B,null))}for(;e<q.length;e+=1)q[e].d(1);q.length=se.length}if(x&4){le=j(Array(5).fill(0).map(Xe));let e;for(e=0;e<le.length;e+=1){const b=Ge(s,le,e);C[e]?C[e].p(b,x):(C[e]=Re(b),C[e].c(),C[e].m(X,null))}for(;e<C.length;e+=1)C[e].d(1);C.length=le.length}},i:ne,o:ne,d(s){s&&f(t),oe(p,s),oe(g,s),oe(k,s),oe(q,s),oe(C,s)}}}const Be=(r,t)=>t,Ke=(r,t)=>t,Ue=(r,t)=>t,Xe=(r,t)=>t;function at(r,t,n){let l=[];function h(){typeof window<"u"&&n(0,l=JSON.parse(localStorage.getItem("sessions"))||[])}h(),console.log(l);function N(){if(typeof window>"u")return{sleep:0,nutrition:0,feel:0};const P=new Date,S=new Date(P);S.setDate(P.getDate()-7);const E=l.filter(d=>{const w=new Date(d.date);return w>=S&&w<=P});if(E.length===0)return{sleep:0,nutrition:0,feel:0};const m=E.reduce((d,w)=>(d.sleep+=Number(w.sleep)||0,d.nutrition+=Number(w.nutrition)||0,d.feel+=Number(w.feel)||0,d),{sleep:0,nutrition:0,feel:0});return{sleep:+(m.sleep/E.length).toFixed(2),nutrition:+(m.nutrition/E.length).toFixed(2),feel:+(m.feel/E.length).toFixed(2)}}let _=N(),O=Math.round((_.sleep+_.nutrition+_.feel)/3),F=l.length;return[l,_,O,F,P=>window.location.href=De+"/journal/sessions/"+P.id]}class ht extends et{constructor(t){super(),tt(this,t,at,nt,Ye,{})}}export{ht as component};
