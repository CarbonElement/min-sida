import{s as Ye,n as ae,e as Ze}from"../chunks/scheduler.DydP1Fc2.js";import{S as et,i as tt,e as c,s as A,t as re,c as h,a as d,k as $,f as w,d as f,b as oe,m as o,g as ie,h as a,l as ce,v as lt,j as st}from"../chunks/index.BIr2hK6o.js";import{e as j}from"../chunks/each.Cy0tYKnX.js";import{b as Se}from"../chunks/paths.DkkJq9GP.js";import{g as nt}from"../chunks/entry.D6-cfFT-.js";function Fe(r,t,n){const s=r.slice();return s[8]=t[n],s}function Me(r,t,n){const s=r.slice();return s[8]=t[n],s}function ze(r,t,n){const s=r.slice();return s[8]=t[n],s}function Ge(r,t,n){const s=r.slice();return s[8]=t[n],s}function He(r,t,n){const s=r.slice();return s[17]=t[n],s}function Qe(r){let t,n,s,i,y,S=r[17].date+"",P,O,V,F;function v(){return r[5](r[17])}return{c(){t=c("div"),n=c("img"),i=A(),y=c("p"),P=re(S),O=A(),this.h()},l(E){t=h(E,"DIV",{class:!0});var u=d(t);n=h(u,"IMG",{class:!0,alt:!0,src:!0}),i=w(u),y=h(u,"P",{class:!0});var D=d(y);P=oe(D,S),D.forEach(f),O=w(u),u.forEach(f),this.h()},h(){o(n,"class","swimmer svelte-1roe92m"),o(n,"alt","swimmer"),Ze(n.src,s="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQujAgmFQCaOtgfzwGzDDRcOonOJ7C2m-hqlQ&s")||o(n,"src",s),o(y,"class","date svelte-1roe92m"),o(t,"class","square svelte-1roe92m")},m(E,u){ie(E,t,u),a(t,n),a(t,i),a(t,y),a(y,P),a(t,O),V||(F=lt(t,"click",v),V=!0)},p(E,u){r=E,u&1&&S!==(S=r[17].date+"")&&st(P,S)},d(E){E&&f(t),V=!1,F()}}}function We(r){let t,n;return{c(){t=c("span"),n=re("★"),this.h()},l(s){t=h(s,"SPAN",{class:!0});var i=d(t);n=oe(i,"★"),i.forEach(f),this.h()},h(){o(t,"class","star "+(r[8]<r[1].sleep?"filled":"")+" svelte-1roe92m")},m(s,i){ie(s,t,i),a(t,n)},p:ae,d(s){s&&f(t)}}}function Be(r){let t,n;return{c(){t=c("span"),n=re("★"),this.h()},l(s){t=h(s,"SPAN",{class:!0});var i=d(t);n=oe(i,"★"),i.forEach(f),this.h()},h(){o(t,"class","star "+(r[8]<r[1].nutrition?"filled":"")+" svelte-1roe92m")},m(s,i){ie(s,t,i),a(t,n)},p:ae,d(s){s&&f(t)}}}function Je(r){let t,n;return{c(){t=c("span"),n=re("★"),this.h()},l(s){t=h(s,"SPAN",{class:!0});var i=d(t);n=oe(i,"★"),i.forEach(f),this.h()},h(){o(t,"class","star "+(r[8]<r[1].feel?"filled":"")+" svelte-1roe92m")},m(s,i){ie(s,t,i),a(t,n)},p:ae,d(s){s&&f(t)}}}function Le(r){let t,n;return{c(){t=c("span"),n=re("★"),this.h()},l(s){t=h(s,"SPAN",{class:!0});var i=d(t);n=oe(i,"★"),i.forEach(f),this.h()},h(){o(t,"class","star "+(r[8]<r[2]?"filled":"")+" svelte-1roe92m")},m(s,i){ie(s,t,i),a(t,n)},p:ae,d(s){s&&f(t)}}}function at(r){let t,n,s,i="Recent sessions",y,S,P='<button class="add svelte-1roe92m">+</button>',O,V,F,v,E="Show all",u,D,I,T="Weekly Statistics",me,N,M,W,Ie="Sleep",pe,B,ge,z,J,Ne="Nutrition",Ce,L,xe,G,R,Pe="Feel",be,K,ke,H,U,Ve="Sessions",Ee,Z,De,Ae,Q,X,ye="General score",we,Y,ee=j(r[0].slice(0,5)),m=[];for(let l=0;l<ee.length;l+=1)m[l]=Qe(He(r,ee,l));let te=j(Array(5).fill(0).map(Re)),p=[];for(let l=0;l<te.length;l+=1)p[l]=We(Ge(r,te,l));let le=j(Array(5).fill(0).map(Ke)),g=[];for(let l=0;l<le.length;l+=1)g[l]=Be(ze(r,le,l));let se=j(Array(5).fill(0).map(Ue)),C=[];for(let l=0;l<se.length;l+=1)C[l]=Je(Me(r,se,l));let ne=j(Array(5).fill(0).map(Xe)),x=[];for(let l=0;l<ne.length;l+=1)x[l]=Le(Fe(r,ne,l));return{c(){t=c("main"),n=c("section"),s=c("h2"),s.textContent=i,y=A(),S=c("a"),S.innerHTML=P,O=A(),V=c("div");for(let l=0;l<m.length;l+=1)m[l].c();F=A(),v=c("a"),v.textContent=E,u=A(),D=c("section"),I=c("h2"),I.textContent=T,me=A(),N=c("div"),M=c("div"),W=c("p"),W.textContent=Ie,pe=A(),B=c("div");for(let l=0;l<p.length;l+=1)p[l].c();ge=A(),z=c("div"),J=c("p"),J.textContent=Ne,Ce=A(),L=c("div");for(let l=0;l<g.length;l+=1)g[l].c();xe=A(),G=c("div"),R=c("p"),R.textContent=Pe,be=A(),K=c("div");for(let l=0;l<C.length;l+=1)C[l].c();ke=A(),H=c("div"),U=c("p"),U.textContent=Ve,Ee=A(),Z=c("p"),De=re(r[3]),Ae=A(),Q=c("div"),X=c("p"),X.textContent=ye,we=A(),Y=c("div");for(let l=0;l<x.length;l+=1)x[l].c();this.h()},l(l){t=h(l,"MAIN",{class:!0});var b=d(t);n=h(b,"SECTION",{class:!0});var e=d(n);s=h(e,"H2",{class:!0,"data-svelte-h":!0}),$(s)!=="svelte-18np5ji"&&(s.textContent=i),y=w(e),S=h(e,"A",{href:!0,"data-svelte-h":!0}),$(S)!=="svelte-1ga9esc"&&(S.innerHTML=P),O=w(e),V=h(e,"DIV",{class:!0});var k=d(V);for(let _=0;_<m.length;_+=1)m[_].l(k);k.forEach(f),F=w(e),v=h(e,"A",{class:!0,href:!0,"data-svelte-h":!0}),$(v)!=="svelte-16sobnv"&&(v.textContent=E),e.forEach(f),u=w(b),D=h(b,"SECTION",{class:!0});var he=d(D);I=h(he,"H2",{class:!0,"data-svelte-h":!0}),$(I)!=="svelte-11cmfec"&&(I.textContent=T),me=w(he),N=h(he,"DIV",{class:!0});var q=d(N);M=h(q,"DIV",{class:!0});var fe=d(M);W=h(fe,"P",{class:!0,"data-svelte-h":!0}),$(W)!=="svelte-12m8zmj"&&(W.textContent=Ie),pe=w(fe),B=h(fe,"DIV",{class:!0});var qe=d(B);for(let _=0;_<p.length;_+=1)p[_].l(qe);qe.forEach(f),fe.forEach(f),ge=w(q),z=h(q,"DIV",{class:!0});var ue=d(z);J=h(ue,"P",{class:!0,"data-svelte-h":!0}),$(J)!=="svelte-w2xvzm"&&(J.textContent=Ne),Ce=w(ue),L=h(ue,"DIV",{class:!0});var je=d(L);for(let _=0;_<g.length;_+=1)g[_].l(je);je.forEach(f),ue.forEach(f),xe=w(q),G=h(q,"DIV",{class:!0});var de=d(G);R=h(de,"P",{class:!0,"data-svelte-h":!0}),$(R)!=="svelte-1od1tx6"&&(R.textContent=Pe),be=w(de),K=h(de,"DIV",{class:!0});var Oe=d(K);for(let _=0;_<C.length;_+=1)C[_].l(Oe);Oe.forEach(f),de.forEach(f),ke=w(q),H=h(q,"DIV",{class:!0});var ve=d(H);U=h(ve,"P",{class:!0,"data-svelte-h":!0}),$(U)!=="svelte-1t2pf7v"&&(U.textContent=Ve),Ee=w(ve),Z=h(ve,"P",{class:!0});var Te=d(Z);De=oe(Te,r[3]),Te.forEach(f),ve.forEach(f),Ae=w(q),Q=h(q,"DIV",{class:!0});var _e=d(Q);X=h(_e,"P",{class:!0,"data-svelte-h":!0}),$(X)!=="svelte-i9m9kk"&&(X.textContent=ye),we=w(_e),Y=h(_e,"DIV",{class:!0});var $e=d(Y);for(let _=0;_<x.length;_+=1)x[_].l($e);$e.forEach(f),_e.forEach(f),q.forEach(f),he.forEach(f),b.forEach(f),this.h()},h(){o(s,"class","svelte-1roe92m"),o(S,"href",Se+"/journal/new"),o(V,"class","sessions svelte-1roe92m"),o(v,"class","link show svelte-1roe92m"),o(v,"href",Se+"/journal/sessions"),o(n,"class","recent svelte-1roe92m"),o(I,"class","svelte-1roe92m"),o(W,"class","bold svelte-1roe92m"),o(B,"class","stars svelte-1roe92m"),o(M,"class","stats_square svelte-1roe92m"),o(J,"class","bold svelte-1roe92m"),o(L,"class","stars svelte-1roe92m"),o(z,"class","stats_square svelte-1roe92m"),o(R,"class","bold svelte-1roe92m"),o(K,"class","stars svelte-1roe92m"),o(G,"class","stats_square svelte-1roe92m"),o(U,"class","bold svelte-1roe92m"),o(Z,"class","bold three svelte-1roe92m"),o(H,"class","stats_square svelte-1roe92m"),o(X,"class","bold svelte-1roe92m"),o(Y,"class","stars svelte-1roe92m"),o(Q,"class","stats_square svelte-1roe92m"),o(N,"class","stats svelte-1roe92m"),o(D,"class","stats-main svelte-1roe92m"),o(t,"class","svelte-1roe92m")},m(l,b){ie(l,t,b),a(t,n),a(n,s),a(n,y),a(n,S),a(n,O),a(n,V);for(let e=0;e<m.length;e+=1)m[e]&&m[e].m(V,null);a(n,F),a(n,v),a(t,u),a(t,D),a(D,I),a(D,me),a(D,N),a(N,M),a(M,W),a(M,pe),a(M,B);for(let e=0;e<p.length;e+=1)p[e]&&p[e].m(B,null);a(N,ge),a(N,z),a(z,J),a(z,Ce),a(z,L);for(let e=0;e<g.length;e+=1)g[e]&&g[e].m(L,null);a(N,xe),a(N,G),a(G,R),a(G,be),a(G,K);for(let e=0;e<C.length;e+=1)C[e]&&C[e].m(K,null);a(N,ke),a(N,H),a(H,U),a(H,Ee),a(H,Z),a(Z,De),a(N,Ae),a(N,Q),a(Q,X),a(Q,we),a(Q,Y);for(let e=0;e<x.length;e+=1)x[e]&&x[e].m(Y,null)},p(l,[b]){if(b&1){ee=j(l[0].slice(0,5));let e;for(e=0;e<ee.length;e+=1){const k=He(l,ee,e);m[e]?m[e].p(k,b):(m[e]=Qe(k),m[e].c(),m[e].m(V,null))}for(;e<m.length;e+=1)m[e].d(1);m.length=ee.length}if(b&2){te=j(Array(5).fill(0).map(Re));let e;for(e=0;e<te.length;e+=1){const k=Ge(l,te,e);p[e]?p[e].p(k,b):(p[e]=We(k),p[e].c(),p[e].m(B,null))}for(;e<p.length;e+=1)p[e].d(1);p.length=te.length}if(b&2){le=j(Array(5).fill(0).map(Ke));let e;for(e=0;e<le.length;e+=1){const k=ze(l,le,e);g[e]?g[e].p(k,b):(g[e]=Be(k),g[e].c(),g[e].m(L,null))}for(;e<g.length;e+=1)g[e].d(1);g.length=le.length}if(b&2){se=j(Array(5).fill(0).map(Ue));let e;for(e=0;e<se.length;e+=1){const k=Me(l,se,e);C[e]?C[e].p(k,b):(C[e]=Je(k),C[e].c(),C[e].m(K,null))}for(;e<C.length;e+=1)C[e].d(1);C.length=se.length}if(b&4){ne=j(Array(5).fill(0).map(Xe));let e;for(e=0;e<ne.length;e+=1){const k=Fe(l,ne,e);x[e]?x[e].p(k,b):(x[e]=Le(k),x[e].c(),x[e].m(Y,null))}for(;e<x.length;e+=1)x[e].d(1);x.length=ne.length}},i:ae,o:ae,d(l){l&&f(t),ce(m,l),ce(p,l),ce(g,l),ce(C,l),ce(x,l)}}}const Re=(r,t)=>t,Ke=(r,t)=>t,Ue=(r,t)=>t,Xe=(r,t)=>t;function rt(r,t,n){let s,i=[];function y(){typeof window<"u"&&n(4,i=JSON.parse(localStorage.getItem("sessions"))||[])}y(),console.log(i);function S(){if(typeof window>"u")return{sleep:0,nutrition:0,feel:0};const v=new Date,E=new Date(v);E.setDate(v.getDate()-7);const u=i.filter(I=>{const T=new Date(I.date);return T>=E&&T<=v});if(u.length===0)return{sleep:0,nutrition:0,feel:0};const D=u.reduce((I,T)=>(I.sleep+=Number(T.sleep)||0,I.nutrition+=Number(T.nutrition)||0,I.feel+=Number(T.feel)||0,I),{sleep:0,nutrition:0,feel:0});return{sleep:+(D.sleep/u.length).toFixed(2),nutrition:+(D.nutrition/u.length).toFixed(2),feel:+(D.feel/u.length).toFixed(2),count:u.length}}let P=S(),O=Math.round((P.sleep+P.nutrition+P.feel)/3),V=P.count||0;const F=v=>nt(Se+"/journal/sessions/"+v.id);return r.$$.update=()=>{r.$$.dirty&16&&n(0,s=[...i].sort((v,E)=>{const u=new Date(`${v.date}T${v.time||"00:00"}`);return new Date(`${E.date}T${E.time||"00:00"}`)-u}))},[s,P,O,V,i,F]}class ut extends et{constructor(t){super(),tt(this,t,rt,at,Ye,{})}}export{ut as component};
